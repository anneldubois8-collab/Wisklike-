<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Wishlike (Mobile)</title>
<style>
  :root{--bg:#0f0f0f;--fg:#f3f3f3;--muted:#bdbdbd;--panel:#161616;--border:#2a2a2a;--hud-h:56px;}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:ui-rounded,-apple-system,system-ui,Segoe UI,Roboto,Arial;}
  #app{height:100%;display:flex;flex-direction:column}
  .hud{position:sticky;top:0;padding:10px;height:var(--hud-h);background:#121212;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px;font-size:16px}
  .title{font-weight:700;margin-right:auto}
  .badge{background:#1d1d1d;border:1px solid var(--border);padding:6px 10px;border-radius:10px;color:var(--muted)}
  #log{flex:1;overflow:auto;padding:14px 14px 24px 14px;line-height:1.35;font-size:18px;background:var(--panel)}
  .footer{position:sticky;bottom:0;background:#121212;border-top:1px solid var(--border)}
  .quickbar{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;padding:12px}
  .qbtn{font-size:16px;padding:12px 10px;background:#1b1b1b;color:#fff;border:1px solid var(--border);border-radius:10px}
  .promptline{display:flex;gap:8px;padding:10px;padding-top:0}
  #input{flex:1;font-size:18px;padding:14px 12px;background:#161616;color:#fff;border:1px solid var(--border);border-radius:10px}
  #btn{font-size:18px;font-weight:700;padding:14px 16px;background:#35d07f;color:#000;border:none;border-radius:10px}
  @media (max-width:380px){.quickbar{grid-template-columns:repeat(4,1fr)}}
</style>
</head>
<body>
<div id="app">
  <div class="hud">
    <div class="title">Wishlike</div>
    <div class="badge" id="loc">—</div>
    <div class="badge" id="time">Turn 0</div>
  </div>

  <div id="log" aria-live="polite">Loading… if you only see this text and nothing else changes, JavaScript didn’t run.</div>

  <div class="footer">
    <div class="quickbar">
      <button class="qbtn" data-cmd="LOOK">LOOK</button>
      <button class="qbtn" data-cmd="I">INV</button>
      <button class="qbtn" data-cmd="HELP">HELP</button>
      <button class="qbtn" data-cmd="N">N</button>
      <button class="qbtn" data-cmd="S">S</button>
      <button class="qbtn" data-cmd="E">E</button>
      <button class="qbtn" data-cmd="W">W</button>
    </div>
    <div class="promptline">
      <input id="input" type="text" inputmode="latin" autocomplete="off" autocapitalize="characters" autocorrect="off"
             placeholder="Type a command (e.g., WISH FOR LIGHT)" />
      <button id="btn" aria-label="Enter command">Enter</button>
    </div>
  </div>
</div>

<script>
/* Minimal on-screen error reporter so you’re not guessing */
window.addEventListener('error', e => {
  const log = document.getElementById('log');
  log.innerHTML += "\\n[JS ERROR] " + (e.message || e);
});
/* Tiny IF to prove JS is running; replace with full version after it works */
const state = { turn:0, here:"lane" };
const rooms = {
  lane: { name:"Pebble Lane", desc:"Dusk settles over the village. East to a gate; west to the harbor.", exits:{e:"gate",w:"harbor"} },
  gate: { name:"Iron Gate", desc:"An old iron gate. West returns to the lane.", exits:{w:"lane"} },
  harbor: { name:"Harbor Edge", desc:"Water slaps the pilings. East returns to the lane.", exits:{e:"lane"} }
};
const logEl = document.getElementById('log'), locEl=document.getElementById('loc'), timeEl=document.getElementById('time');
function say(t){ logEl.innerHTML += (logEl.innerHTML?"\\n":"") + t; logEl.scrollTop = logEl.scrollHeight; }
function look(){ const r=rooms[state.here]; say("\\n"+r.name+"\\n"+r.desc); }
function setHUD(){ locEl.textContent = rooms[state.here].name; timeEl.textContent = "Turn " + state.turn; }
function move(dir){ const r=rooms[state.here]; const d=r.exits[dir]; if(!d) return say("You can’t go that way."); state.here=d; state.turn++; setHUD(); look(); }
function handle(cmd){
  cmd = (cmd||"").trim().toLowerCase(); if(!cmd) return;
  say("\\n> " + cmd);
  if (cmd==="look"||cmd==="l") return look();
  if (["n","s","e","w"].includes(cmd)) return move(cmd);
  say("Try LOOK, N, S, E, W.");
}
document.getElementById('btn').onclick = ()=>{ const v=input.value; input.value=""; handle(v); input.focus(); };
const input = document.getElementById('input');
input.addEventListener('keydown', e=>{ if(e.key==="Enter"){ document.getElementById('btn').click(); }});
document.querySelectorAll('.qbtn').forEach(b=> b.addEventListener('click', ()=> { handle(b.dataset.cmd); input.focus(); }));
/* Boot */
say("Welcome to Wishlike (smoke test).\\nIf you can read this and LOOK works, JS is running.");
setHUD(); look();
</script>
</body>
</html>
